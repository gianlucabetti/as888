000100171018--  Generazione SQL 
000110171018--  Versione:                  	V7R2M0 140418 
000120171018--  Generata su:               	18/10/17 10:56:53 
000130171018--  Database relazionale:      	SETRAS 
000140171018--  Opzioni standard:          	DB2 for i 
000150171018CREATE VIEW UNITRAGRU.CONTRFATI ( 
000160171018	ANNO , 
000170171018	L_PART , 
000180171018	SERIE , 
000190171018	NUM_SPED , 
000200171018	L_ARRIVO , 
000210171018	COD_BOLLA , 
000220171018	TIPO_BOLLA , 
000230171018	VAR_IN_SF , 
000240171018	DATA_IN_SF , 
000250171018	UTE_VARIAZ , 
000260171018	CAU_STORNO , 
000270171018	DAT_STORNO , 
000280171018	"UTE STORNO" FOR COLUMN UTE_S00001 ) 
000290171018	AS 
000300171018	WITH SEL1 AS(  
000310171018	 SELECT TASAAS, TASLNP, TASNRS, TASNSP, TASLNA, TASCBO, TASTBL,  
000320171018	 TASDCM, TASCCA, FIARBT0F.ARBPRU, FIARBT0F.ARBDTV, FIARBT0F.ARBCVB  
000330171018	 FROM UNITRAGRU.FIARBT0F FIARBT0F, GAITRAGRU.TITAS00F TITAS00F  
000340171018	 WHERE ARBCVB='T6'  
000350171018	 AND TASTBL= 'AS' AND  
000360171018	 ARBAAS=TASAAS AND ARBLNP=TASLNP AND ARBNRS=TASNRS AND ARBNSP=TASNSP 
000370171018	 AND TASCCA= ' '  
000380171018	 UNION  
000390171018	 SELECT TASAAS, TASLNP, TASNRS, TASNSP, TASLNA, TASCBO, TASTBL,  
000400171018	 TASDCM, TASCCA, FIARBT0F.ARBPRU, FIARBT0F.ARBDTV, FIARBT0F.ARBCVB  
000410171018	 FROM UNITRAGRU.FIARBT0F FIARBT0F, GAITRAGRU.TITAS10F TITAS10F  
000420171018	 WHERE ARBCVB='T6'  
000430171018	 AND TASTBL= 'AS' AND TASCCA= ' ' AND  
000440171018	 ARBAAS=TASAAS AND ARBLNP=TASLNP AND ARBNRS=TASNRS AND ARBNSP=TASNSP 
000450171018	 )  
000460171018	 SELECT TASAAS AS ANNO, TASLNP AS "L_PART", TASNRS AS SERIE, TASNSP  
000470171018	AS "NUM_SPED", TASLNA "L_ARRIVO", TASCBO AS "COD_BOLLA", TASTBL AS  
000480171018	"TIPO_BOLLA",  
000490171018	 SEL1.ARBCVB AS "VAR_IN_SF", SEL1.ARBDTV AS "DATA_IN_SF",  
000500171018	SEL1.ARBPRU AS "UTE_VARIAZ",  
000510171018	 FNARBK0F.ARBCVB AS "CAU_STORNO" , FNARBK0F.ARBDTV AS "DAT_STORNO"  
000520171018	 , FNARBK0F.ARBPRU AS "UTE STORNO"  
000530171018	 FROM SEL1 SEL1, UNITRAGRU.FNARBK0F FNARBK0F WHERE FNARBK0F.ARBAAS  
000540171018	 =TASAAS AND FNARBK0F.ARBLNP=  
000550171018	 TASLNP AND FNARBK0F.ARBNRS=TASNRS AND FNARBK0F.ARBNSP=TASNSP  
000560171018	 AND FNARBK0F.ARBCVB='KT'   
000570171018	RCDFMT CONTRFATI  ; 
000580171018  
000590171018LABEL ON TABLE UNITRAGRU.CONTRFATI 
000600171018	IS 'Controlla fatture immediate stornate' ; 
000610171018  
000620171018LABEL ON COLUMN UNITRAGRU.CONTRFATI 
000630171018( ANNO IS 'ANNO                SPED' , 
000640171018	L_PART IS 'P.O                 PARTENZA' , 
000650171018	SERIE IS 'NUM                 SERIE' , 
000660171018	NUM_SPED IS 'NUM.                SPED.' , 
000670171018	L_ARRIVO IS 'P.O                 ARR' , 
000680171018	COD_BOLLA IS 'COD                 BOLLA' , 
000690171018	TIPO_BOLLA IS 'TIP.                BOL.' , 
000700171018	VAR_IN_SF IS 'CAU                 VARIAZ              BOLLE' , 
000710171018	DATA_IN_SF IS 'DATA                VARIAZ.' , 
000720171018	UTE_VARIAZ IS 'PROFILO             UTENTE' , 
000730171018	CAU_STORNO IS 'CAU                 VARIAZ              BOLLE' , 
000740171018	DAT_STORNO IS 'DATA                VARIAZ.' , 
000750171018	"UTE STORNO" IS 'PROFILO             UTENTE' ) ; 
000760171018  
000770171018LABEL ON COLUMN UNITRAGRU.CONTRFATI 
000780171018( ANNO TEXT IS 'ANNO SPEDIZIONE' , 
000790171018	L_PART TEXT IS 'P.O. PARTENZA' , 
000800171018	SERIE TEXT IS 'NUMERO SERIE' , 
000810171018	NUM_SPED TEXT IS 'NUMERO SPEDIZIONE' , 
000820171018	L_ARRIVO TEXT IS 'P.O. ARRIVO' , 
000830171018	COD_BOLLA TEXT IS 'CODICE BOLLA' , 
000840171018	TIPO_BOLLA TEXT IS 'TIPO BOLLA' , 
000850171018	VAR_IN_SF TEXT IS 'CAUS.VARIAZ.BOLLE' , 
000860171018	DATA_IN_SF TEXT IS 'DATA VARIAZIONE' , 
000870171018	UTE_VARIAZ TEXT IS 'PROFILO UTENTE CHE HA ESEGUITO LA VARIAZIONE' , 
000880171018	CAU_STORNO TEXT IS 'CAUS.VARIAZ.BOLLE' , 
000890171018	DAT_STORNO TEXT IS 'DATA VARIAZIONE' , 
000900171018	"UTE STORNO" TEXT IS 'PROFILO UTENTE CHE HA ESEGUITO LA VARIAZIONE' ) ; 
000910171018  
000920171018GRANT ALTER , REFERENCES , SELECT   
000930171018ON UNITRAGRU.CONTRFATI TO QPGMR WITH GRANT OPTION ;
