000100101201     /*END
000200120608       //==============================================================
000300120608       //?- - - - - - - - - - - -   P R O V A   - - - - - - - - - - - -?
000400120608       //?                S T A M P A   S U   L A S E R                ?
000500120608       //?          I M M A G I N E   * J P E G   O   * P D F          ?
000600120608       //==============================================================
000700120608
000800120608       //--------------------------------------------------------------
000900120608       //?Parametri di compilazione (vedi *cmd UBCRTOBJ).              ?
001000120608       //--------------------------------------------------------------
001100120608
001200120608     /*PRM  dbgview(*source)
001300120608     /*END
001400120608
001500120608       //--------------------------------------------------------------
001600120608       //?Specifiche di controllo.                                     ?
001700120608       //--------------------------------------------------------------
001800030623
001900080704     h decedit('0,') datedit(*dmy/) option(*nodebugio)
002000110426     h dftactgrp(*no)
002100120608
002200120608       //--------------------------------------------------------------
002300120608       //?Dichiarazione file.                                          ?
002400120608       //--------------------------------------------------------------
002500030623
002600120608       // -?Printer-File?
002700120608     fFNLSBXP   o    e             printer usropn  infds(prtINFO)
002800120608     f                                     rename(LSBXPOS :A4prtPOS )
002900120608     f                                     rename(LSBXROWNR:A4prtROWNR)
003000120608     f                                     rename(LSBXIMG:A4prtIMG)
003100030623
003200120608       //--------------------------------------------------------------
003300120608       //?Definizione costanti.                                        ?
003400120608       //--------------------------------------------------------------
003500030623
003600030623     d $Lungh          c                   const('*...+....1....+....2....+....-
003700031104     d                                     3....+....4....+....5....+....6....+-
003800031104     d                                     ....7....+....8....+....A')
003900030623     d $LunghN         c                   const(123456789012345678901234567890)
004000030623     d $LunghA         c                   const('ABCDEFGHIJKLMNOPQRSTUVWXYZABC-
004100030623     d                                     DEFGHIJKLMNOPQRSTUVWXYZ')
004200120608
004300120608       //--------------------------------------------------------------
004400120608       //?Definizione schiere.                                         ?
004500120608       //--------------------------------------------------------------
004600120608
004700120608
004800120608       //--------------------------------------------------------------
004900120608       //?Definizione aree dati.                                       ?
005000120608       //--------------------------------------------------------------
005100120608
005200120608
005300120608       //--------------------------------------------------------------
005400120608       //?Definizione strutture dati.                                  ?
005500120608       //--------------------------------------------------------------
005600120608
005700120608       // -?Status DS?
005800030623     d Status         sds           333
005900120608     d   SDSpgm          *proc
006000120608     d   SDSprm          *parms
006100120608     d   SDSdta              191    198
006200120608     d   SDSjob              244    253
006300120608     d   SDSusr              254    263
006400120608
006500120608       // -?InfDS?
006600120608     d PrtINFO         ds
006700120608     d   CurLineA4           367    368i 0
006800120608
006900120608       //--------------------------------------------------------------
007000120608       //?Definizione variabili globali.                               ?
007100120608       //--------------------------------------------------------------
007200080715
007300120608
007400120608       //--------------------------------------------------------------
007500120608       //?Definizione prototipi procedure.                             ?
007600120608       //--------------------------------------------------------------
007700080715
007800030623
007900120608       //--------------------------------------------------------------
008000120608       //?Definizione key-list.                                        ?
008100120608       //--------------------------------------------------------------
008200120608
008300120608
008400120608       //--------------------------------------------------------------
008500120608       //?M A I N - L I N E                                            ?
008600120608       //--------------------------------------------------------------
008700030623
008800030623     c     *Entry        plist
008900120608       // -?£Img   - Nome immagine?                                        ?
009000120608     c                   parm                    £Img            150
009100120608       // -?£Typ   - Tipo immagine?                                        ?
009200120608     c                   parm                    £Typ             10
009300120608
009400120608      /free
009500120608
009600120608       *inLR = *on;
009700120608       if  %parms() < 2;
009800120608         return;
009900120608       endif;
010000120608
010100120608       // -?Pulizia del PRTF?
010200120608       open  FNLSBXP;
010300120608       exsr  sr_ClrPrtF;
010400120608
010500120608       // -?Stampa?
010600120608       exsr  sr_Stampa;
010700120608
010800120608       // -?Fine?
010900120608       close  FNLSBXP;
011000120608       return;
011100030623
011200120608       //--------------------------------------------------------------
011300120608       //?Pulizia del *PrtF.                                           ?
011400120608       //--------------------------------------------------------------
011500120608       BEGSR  sr_ClrPrtF;
011600030623
011700120608         clear  A4prtPos;
011800120608         clear  A4prtRowNr;
011900120608         clear  A4prtImg;
012000120608
012100120608       ENDSR;
012200030915
012300120608       //--------------------------------------------------------------
012400120608       //?Stampa dell'immagine.                                        ?
012500120608       //--------------------------------------------------------------
012600120608       BEGSR  sr_Stampa;
012700120608
012800120608         // -?Posizionamento all'inizio della pagina?
012900120608         *in41 = *on;
013000120608         *in42 = *off;
013100120608         *in43 = *off;
013200120608         *in44 = *off;
013300120608         write  A4prtPOS;
013400120608
013500120608         // -?Stampa del n° riga?
013600120608         §PC1 = 0.20;
013700120608         For  pRowNr = 1  To  93;
013800120608           §PC0 = pRowNr / 8;
013900120608           write  A4prtROWnr;
014000120608         EndFor;
014100120608         §PC1 = 7.90;
014200120608         For  pRowNr = 1  To  93;
014300120608           §PC0 = pRowNr / 8;
014400120608           write  A4prtROWnr;
014500120608         EndFor;
014600120608
014700120608         // -?Stampa dell'immagine?
014800120608         §Img  = £Img;
014900120608         §Typ  = £Typ;
015000120608         §Row  = 0.7;
015100120608         §Col  = 0.7;
015200120608         §Rot  = 0;
015300120608         //§Wdth = 6.0;
015400120608         //§Hgt  = 9.0;
015500120608         §Path = '/tmp';
015600120608         write  A4prtIMG;
015700120608
015800120608       ENDSR;
015900120608
016000120608      /end-free
