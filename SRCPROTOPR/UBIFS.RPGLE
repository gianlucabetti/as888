000100080729      **-------------------------------------------------------------**
000200161014      ** UBIFSPR IFS - Prototipi di base                             **
000300161014      **-------------------------------------------------------------**
000400161014
000500161014     D*--------------------------------------------------------------------
000600161014     D* Creazione nome file (temporaneo) univoco assoluto in tutto il sistema
000700161014     D*--------------------------------------------------------------------
000800161014     D IFS_CreateTempFileName...
000900161014     D                 PR              *   EXTPROC('_C_IFS_tmpnam')
001000161014     D  fileName                     39A   OPTIONS(*OMIT)
001100161014     D*--------------------------------------------------------------------
001200161014
001300161014     D*--------------------------------------------------------------------
001400161014     D* Check file IFS
001500161014     D*--------------------------------------------------------------------
001600161014     D IFS_CheckFile...
001700161014     D                 PR            10I 0 EXTPROC('access')
001800161014     D  pathFileName                   *   VALUE OPTIONS(*STRING)
001900161014     D  accessMode                   10I 0 VALUE
002000161014     D*--------------------------------------------------------------------
002100161014
002200161014     D*--------------------------------------------------------------------
002300161014     D* Apertura file IFS
002400161014     D*--------------------------------------------------------------------
002500161014     D IFS_OpenFile...
002600161014     D                 PR            10I 0 EXTPROC('open')
002700161014     D  pathFileName                   *   VALUE OPTIONS(*STRING)
002800161014     D  openFlags                    10I 0 VALUE
002900161014     D  mode                         10U 0 VALUE OPTIONS(*NOPASS)
003000161014     D  ccsid                        10U 0 VALUE OPTIONS(*NOPASS)
003100161014     D  txtCreatId                   10U 0 VALUE OPTIONS(*NOPASS)
003200161014     D*--------------------------------------------------------------------
003300161014
003400161014     D*--------------------------------------------------------------------
003500161014     D* Lettura file IFS
003600161014     D*--------------------------------------------------------------------
003700161014     D IFS_ReadFile...
003800161014     D                 PR            10I 0 EXTPROC('read')
003900161014     D  fileDescr                    10I 0 VALUE
004000161014     D  dataReceived                   *   VALUE
004100161014     D  nBytes                       10U 0 VALUE
004200161014     D*--------------------------------------------------------------------
004300161014
004400161014     D*--------------------------------------------------------------------
004500161014     D* Scrittura file IFS
004600161014     D*--------------------------------------------------------------------
004700161014     D IFS_WriteFile...
004800161014     D                 PR            10I 0 EXTPROC('write')
004900161014     D  fileDescr                    10I 0 VALUE
005000161014     D  dataToWrite                    *   VALUE
005100161014     D  nBytes                       10U 0 VALUE
005200161014     D*--------------------------------------------------------------------
005300161028
005400161028     D*--------------------------------------------------------------------
005500161028     D* Scrittura file IFS - any type of data Max 512KB
005600161028     D*--------------------------------------------------------------------
005700161028     D IFS_WriteFileMax512K...
005800161028     D                 PR            10I 0 EXTPROC('write')
005900161028     D  fileDescr                    10I 0 VALUE
006000161028     D  dataToWrite              524288A   CONST OPTIONS(*VARSIZE)
006100161028     D  nBytes                       10U 0 VALUE
006200161028     D*--------------------------------------------------------------------
006300161014
006400161014     D*--------------------------------------------------------------------
006500161014     D* Chiusura file IFS
006600161014     D*--------------------------------------------------------------------
006700161014     D IFS_CloseFile...
006800161014     D                 PR            10I 0 EXTPROC('close')
006900161014     D  fileDescr                    10I 0 VALUE
007000161014     D*--------------------------------------------------------------------
007100161014
007200161014     D*--------------------------------------------------------------------
007300161014     D* Set File Read/Write Offset
007400161014     D*--------------------------------------------------------------------
007500161014     D IFS_SetFileOffset...
007600161014     D                 PR            10I 0 EXTPROC('lseek')
007700161014     D  fileDescr                    10I 0 VALUE
007800161014     D  offSet                       10I 0 VALUE
007900161014     D  whence                       10I 0 VALUE
008000161014     D*--------------------------------------------------------------------
008100161014
008200161014     D*--------------------------------------------------------------------
008300161014     D* Rimuove file in IFS
008400161014     D*--------------------------------------------------------------------
008500161014     D IFS_RemoveFile...
008600161014     D                 PR            10I 0 EXTPROC('unlink')
008700170803     D  pathFileName                   *   VALUE OPTIONS(*STRING:*TRIM)
008800161014     D*--------------------------------------------------------------------
008900161014
009000161014     D*--------------------------------------------------------------------
009100161014     D* Rinomina un file o una directory in IFS in REPLACE (non usare)
009200161014     D*--------------------------------------------------------------------
009300161014     D IFS_RenameFileOrDirUnlink...
009400161014     D                 PR            10I 0 EXTPROC('Qp0lRenameUnlink')
009500161014     D  oldName                        *   VALUE OPTIONS(*STRING)
009600161014     D  newName                        *   VALUE OPTIONS(*STRING)
009700161014     D*--------------------------------------------------------------------
009800161014
009900161014     D*--------------------------------------------------------------------
010000161014     D* Rinomina un file o una directory in IFS
010100161014     D*--------------------------------------------------------------------
010200161014     D IFS_RenameFileOrDirKeep...
010300161014     D                 PR            10I 0 EXTPROC('Qp0lRenameKeep')
010400161014     D  oldName                        *   VALUE OPTIONS(*STRING)
010500161014     D  newName                        *   VALUE OPTIONS(*STRING)
010600161014     D*--------------------------------------------------------------------
010700161014
010800161014     D*--------------------------------------------------------------------
010900161014     D* Reperimento informazioni file IFS
011000161014     D*--------------------------------------------------------------------
011100161014     D IFS_GetFileInfo...
011200161014     D                 PR            10I 0 EXTPROC('lstat')
011300161014     D  pathFileName                   *   VALUE OPTIONS(*STRING)
011400161017     D  buffer                         *   VALUE
011500161014     D*--------------------------------------------------------------------
011600161014
011700161014     D*--------------------------------------------------------------------
011800161014     D* Cambia directory IFS
011900161014     D*--------------------------------------------------------------------
012000161014     D IFS_ChangeDir...
012100161014     D                 PR            10I 0 EXTPROC('chdir')
012200161014     D  path                           *   VALUE OPTIONS(*STRING)
012300161014     D*--------------------------------------------------------------------
012400161014
012500161014     D*--------------------------------------------------------------------
012600161014     D* Apre directory IFS
012700161014     D*--------------------------------------------------------------------
012800161014     D IFS_OpenDir...
012900161014     D                 PR              *   EXTPROC('opendir')
013000161014     D  dirName                        *   VALUE OPTIONS(*STRING)
013100161014     D*--------------------------------------------------------------------
013200161014
013300161014     D*--------------------------------------------------------------------
013400161014     D* Legge una directory
013500161014     D*--------------------------------------------------------------------
013600161014     D IFS_ReadDir...
013700161014     D                 PR              *   EXTPROC('readdir')
013800161014     D  dirPtr                         *   VALUE
013900161014     D*--------------------------------------------------------------------
014000161014
014100161014     D*--------------------------------------------------------------------
014200161014     D* Ri-Legge una directory
014300161014     D*--------------------------------------------------------------------
014400161014     D IFS_RewindDir...
014500161014     D                 PR                  EXTPROC('rewinddir')
014600161014     D  dirPtr                         *   VALUE
014700161014     D*--------------------------------------------------------------------
014800161014
014900161014     D*--------------------------------------------------------------------
015000161014     D* Crea directory IFS
015100161014     D*--------------------------------------------------------------------
015200161014     D IFS_MakeDir...
015300161014     D                 PR            10I 0 EXTPROC('mkdir')
015400161014     D  path                           *   VALUE OPTIONS(*STRING)
015500161014     D  mode                         10U 0 VALUE
015600161014     D*--------------------------------------------------------------------
015700161014
015800161014     D*--------------------------------------------------------------------
015900161014     D* Elimina directory IFS
016000161014     D*--------------------------------------------------------------------
016100161014     D IFS_DelDir...
016200161014     D                 PR            10I 0 EXTPROC('rmdir')
016300161014     D  path                           *   VALUE OPTIONS(*STRING)
016400161014     D*--------------------------------------------------------------------
016500161014
016600161014     D*--------------------------------------------------------------------
016700161014     D* Chiude una directory
016800161014     D*--------------------------------------------------------------------
016900161014     D IFS_CloseDir...
017000161014     D                 PR            10I 0 EXTPROC('closedir')
017100161014     D  dirPtr                         *   VALUE
017200161014     D*--------------------------------------------------------------------
017300161014
