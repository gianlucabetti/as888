000100160229       //---------------------------------------------------------------
000200160229       //?TICFQ4R1 - Confronto Fatturazione Nuovo - Librerie
000300160229       //---------------------------------------------------------------
000400160229     h decedit('0,') datedit(*ymd/) option(*nodebugio)
000500160229
000600160229       //---------------------------------------------------------------
000700160229       //?Dichiarazione file.
000800160229       //---------------------------------------------------------------
000900160229
001000160229       //---------------------------------------------------------------
001100160229       //?Definizione costanti.
001200160229       //---------------------------------------------------------------
001300160229
001400160229       //---------------------------------------------------------------
001500160229       //?Definizione schiere.
001600160229       //---------------------------------------------------------------
001700160229
001800160229       //---------------------------------------------------------------
001900160229       //?Definizione aree dati.
002000160229       //---------------------------------------------------------------
002100160229
002200160229       //---------------------------------------------------------------
002300160229       //?Definizione strutture dati.
002400160229       //---------------------------------------------------------------
002500160229     d KPJBA         e ds
002600160229
002700160229     d param           ds
002800160229     d  pardrf                 1      8  0
002900160229     d  pardtc                 9     16  0
003000160229     d  pardal                17     24  0
003100160229     d  paral                 25     32  0
003200160229     d  parmlib               33     42
003300160229     d  parmlibw              43     52
003400160229
003500160229       //---------------------------------------------------------------
003600160229       //?Definizione variabili globali.
003700160229       //---------------------------------------------------------------
003800160229     d  err_lib        s              1a
003900160229     d  libreria       s             10a
004000160229     d  testo          s             50a
004100160229
004200160229       //---------------------------------------------------------------
004300160229       //?Definizione procedure esterne.
004400160229       //---------------------------------------------------------------
004500160229       // - Controllo se esiste libreria
004600160229     d TICF89C         pr                  extpgm('TICF89C')
004700160229     d  err_lib                       1
004800160229     d  libreria                     10
004900160229
005000160229       // - Creazione libreria
005100160229     d TICFQ0C         pr                  extpgm('TICFQ0C')
005200160229     d  kpjba                              likeds(kpjba)
005300160229
005400160229       // - Pulizia file libreria
005500160229     d TICFQ8C         pr                  extpgm('TICFQ8C')
005600160229     d  kpjba                              likeds(kpjba)
005700160229
005800160229       //---------------------------------------------------------------
005900160229       //?Definizione key-list.
006000160229       //---------------------------------------------------------------
006100160229
006200160229       //---------------------------------------------------------------
006300160229       //?Main.
006400160229       //---------------------------------------------------------------
006500160229
006600160229     c     *Entry        plist
006700160229     c                   parm                    kpjba
006800160229
006900160229      /free
007000160229
007100160229       //?Imposto parametri ricevuti
007200160229         param = kpjbu;
007300160229
007400160229       //?Imposto i nuovi nomi delle librerie
007500160229         %subst(parmlib:8:1) = 'M';
007600160229         %subst(parmlibw:8:1) = 'M';
007700160229
007800160229       //?Verifico se esiste la libreria di salvataggio
007900160229         libreria = parmlibw;
008000160229         clear err_lib;
008100160229         TICF89C (err_lib:libreria);
008200160229         testo = 'Conf.Fatturazione Bolle ' +
008300160229                 %editc(pardal:'X') + '/' +
008400160229                 %editc(paral:'X');
008500160229         kpjbu = libreria;
008600160229         %subst(kpjbu:11:50) = testo;
008700160229       //?se esiste pulisco i file
008800160229         IF  err_lib = 'E';
008900160229           TICFQ8C (kpjba);
009000160229         ELSE;
009100160229       //?se non esiste la creo
009200160229           TICFQ0C (kpjba);
009300160229         ENDIF;
009400160229
009500160229         kpjbu = param;
009600160229
009700160229         *inLR = *on;
009800160229
009900160229      /end-free
