000100091026     H DFTACTGRP(*NO) BNDDIR('TIBS')
000200091027
000300091027     ***************************************************************************
000400091027     **
000500091027     ** Procedure.
000600091027     **
000700091027     ***************************************************************************
000800091028     D/COPY GAITRASRC/SRCPROTOPR,TISI95R
000900091026
001000091026     ***************************************************************************
001100091026     **
001200091026     ** Strutture dati.
001300091026     **
001400091026     ***************************************************************************
001500091026     D azorg00f      E DS                  QUALIFIED
001600091026     D                                     INZ
001700091028     D getLocalitaI...
001800091026     D                 DS                  QUALIFIED
001900091028     D  siglaProvincia...
002000091026     D                                2A
002100091028     D  localita...
002200091026     D                               35A
002300091028     D tisi95ds      E DS                  QUALIFIED
002400091028     D                                     INZ
002500091028     D  i95Tcn       E                     INZ('4')
002600091026
002700091026     ***************************************************************************
002800091026     **
002900091026     ** Campi.
003000091026     **
003100091026     ***************************************************************************
003200091026     D RQSOPC          S             10A                                        * REQUEST OPCODE
003300091026     D RQSDTA          S           9999A                                        * REQUEST DATA
003400091026     D RQSLEN          S              4P 0                                      * REQUEST DATA LENGT
003500091026     D RPYOPC          S             10A                                        * REPLY OPCODE
003600091026     D RPYDTA          S           9999A                                        * REPLY DATA
003700091026     D RPYLEN          S              4P 0                                      * REPLY DATA LENGTH
003800091029     D rpyDtaVar       S           9999A   VARYING
003900091026
004000091026     ***************************************************************************
004100091026     **
004200091026     ** Parametri.
004300091026     **
004400091026     ***************************************************************************
004500091026     C     *ENTRY        PLIST
004600091026     C                   PARM                    RQSOPC
004700091026     C                   PARM                    RQSDTA
004800091026     C                   PARM                    RQSLEN
004900091026     C                   PARM                    RPYOPC
005000091026     C                   PARM                    RPYDTA
005100091026     C                   PARM                    RPYLEN
005200091026
005300091026     ***************************************************************************
005400091026     **
005500091026     ** Main.
005600091026     **
005700091026     ***************************************************************************
005800091026      /FREE
005900091026
006000091026       RESET rpyOpc;
006100091026       RESET rpyDta;
006200091026       RESET rpyLen;
006300091029       RESET rpyDtaVar;
006400091026
006500091028       getLocalitaI = rqsDta;
006600091028       RESET tisi95Ds;
006700091028       tisi95Ds.i95Loc = getLocalitaI.localita;
006800091028       tisi95Ds.i95Prv = getLocalitaI.siglaProvincia;
006900091026
007000091028       ChkCapLocalita(tisi95ds);
007100091026
007200091026       // Errori.
007300091026
007400091028       IF tisi95Ds.o95Err <> *BLANK;
007500091029         rpyDtaVar = %TRIMR(tisi95Ds.o95Msg);
007600091029         rpyOpc = 'ERROR';
007700091029         rpyDta = rpyDtaVar;
007800091029         rpyLen = %LEN(rpyDtaVar);
007900091026         RETURN;
008000091026       ENDIF;
008100091028
008200091026       rpyOpc = 'DONE';
008300091029       rpyDtaVar = %TRIMR(tisi95Ds.o95Loc) + '|';
008400091029       rpyDta = rpyDtaVar;
008500091029       rpyLen = %LEN(rpyDtaVar);
008600091026
008700091026       RETURN;
008800091026
008900091026       //***********************************************************************
009000091026       //
009100091026       // Inizializzazioni.
009200091026       //
009300091026       //***********************************************************************
009400091026
009500091026       BEGSR *INZSR;
009600091026
009700091026       ENDSR;
009800091026
009900091026      /END-FREE
