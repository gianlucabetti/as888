000100000000     h*--------------------------------------------------------------------------------------------*
000200000000     h* Reperimento versione cappario
000300000000     h* input  -> data di riferimento (se =0 prende l'ultima versione)
000400000000     h* output -> versione
000500000000     h*           data di riferimento
000600000000     h*--------------------------------------------------------------------------------------------*
000700000000     h DECEDIT('0,') DATEDIT(*DMY.)
000800000000     f*--------------------------------------------------------------------------------------------*
000900000000     f* Data base
001000000000     f*--------------------------------------------------------------------------------------------*
001100000000     fazcpr02l  IF   E           K DISK                                         *versioni cappario
001200000000     d*--------------------------------------------------------------------------------------------*
001300000000     d* Data structure
001400000000     d*--------------------------------------------------------------------------------------------*
001500000000     d p96dri          S                   LIKE(cprdde)                         *data riferimento
001600000000     d p96ver          S                   LIKE(cprver)                         *versione
001700000000     c*--------------------------------------------------------------------------------------------*
001800000000     c* Main lines
001900000000     c*--------------------------------------------------------------------------------------------*
002000000000     c*
002100000000     c* legge le versioni
002200000000     c     *hival        SETLL     azcpr02l
002300000000     c                   READP     azcpr02l                               98
002400000000do  1c                   DOW       NOT *in98
002500000000if  2c                   IF        cpratb=*blanks                               *non annullata
002600000000if  3c                   IF        p96dri = *zeros  OR                          *ultima versione
002700000000     c                             p96dri > *zeros  AND
002800000000     c                             p96dri >= cprdde AND
002900000000     c                             p96dri <= cprdsc
003000000000     c                   Z-ADD     cprdde        p96dri                         *data riferimento
003100000000     c                   Z-ADD     cprver        p96ver                         *versione
003200000000     c                   LEAVE                                                  *fine ciclo
003300000000e   3c                   ENDIF
003400000000e   2c                   ENDIF
003500000000     c                   READP     azcpr02l                               98
003600000000e   1c                   ENDDO                                                  *fine versioni
003700000000     c*
003800000000     c                   SETON                                            lr
003900000000     c*--------------------------------------------------------------------------------------------*
004000000000     C* *inzsr - operazioni iniziali
004100000000     c*--------------------------------------------------------------------------------------------*
004200000000     C     *inzsr        BEGSR
004300000000     c*
004400000000     c* ricevimento parametri
004500000000     c     *ENTRY        PLIST
004600000000     c                   PARM                    p96dri
004700000000     c                   PARM                    p96ver
004800000000     c*
004900000000     c                   ENDSR
005000000000     c*--------------------------------------------------------------------------------------------*
