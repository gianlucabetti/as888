000100080530      *PARMS DFTACTGRP(*NO) ACTGRP(QILE) OPTION(*NOXREF) DATEDIT(*yMd.)
000200080206      //--------------------------------------------------------------
000300100831      //?TNSDV4R - conferma Movimenti Invii/rientri giornalieri  UNITÀ EDP
000400080206      //--------------------------------------------------------------
000500080206
000600080206     h decedit('0,') datedit(*ymd/) option(*nodebugio)
000700080206
000800080206      //---------------------------------------------------------------
000900080206      //?Dichiarazione file.
001000080206      //---------------------------------------------------------------
001100050704
001200100312
001300080206      //---------------------------------------------------------------
001400080206      //?Definizione aree dati.
001500080206      //---------------------------------------------------------------
001600080206      // - Dati utente
001700080206     d §AzUte        e ds                  extname(AZUTE00F)
001800080206     d                                     dtaara
001900080206     d §DatiUte      e ds                  extname(dDatiUte)
002000080206     d                                     dtaara
002100080206
002200080206      // - Parametri ricevuti
002300080206     d KPJBA         e ds
002400080206
002500080206      // - Reperimento dati utente
002600080206     d TIBS34ds      e ds
002700080206     d dUte01        e ds
002800080702     d DLAT          e ds
002900100827     d tnsdv0ds      e ds
003000080702
003100080206      //---------------------------------------------------------------
003200080206      //?Definizione procedure usate.
003300080206      //---------------------------------------------------------------
003400080414      /copy gaitrasrc/srcprotopr,tibs34r
003500100827      /copy gaitrasrc/srcprotopr,tnsduor
003600080206      //---------------------------------------------------------------
003700080206      //?M A I N - L I N E
003800080206      //---------------------------------------------------------------
003900080206
004000080627     c     *Entry        plist
004100080206     c                   parm                    KPJBA
004200080627
004300080702
004400080206      /free
004500080206
004600080206       // Operazioni iniziali
004700080206       exsr RoutInz;
004800100827
004900100831       // RICHIAMO MODALITÀ conferma movimenti
005000100827       clear tnsdv0ds  ;
005100100830       EVAL §SDV0IMM=' '  ;
005200100831       EVAL §SDV0INT=' '  ;
005300100831       EVAL §SDV0MMAT=' '  ;
005400100831       EVAL §SDV0resi=' '  ;
005500100831       EVAL §SDV0CONF='S'  ;
005600100827       eval kpjbu=tnsdv0ds  ;
005700100827       callp TNSDUOR (kpjba)  ;
005800081215
005900080206
006000080206       // Operazioni finali
006100080206       exsr RoutEnd;
006200080206
006300080206       //--------------------------------------------------------------
006400080206       //?Operazioni iniziali.
006500080206       //--------------------------------------------------------------
006600080206       BEGSR RoutInz;
006700080206         // Reperimento dati job
006800080206         exsr DatiJob;
006900080627         ENDSR;
007000080206
007100080206       //--------------------------------------------------------------
007200080206       //?Reperimento Dati del job (Utente/Operativi).
007300080206       //--------------------------------------------------------------
007400080206       BEGSR DatiJob;
007500080206
007600080206         in(E) §AzUte;
007700080206         if NOT %error;
007800080206           in(E) §DatiUte;
007900080206         endif;
008000080206         if %error or RSut = *blanks;
008100080206           clear TIBS34ds;
008200080206           tibs34r(tibs34ds);
008300080206           in §AzUte;
008400080206           in §DatiUte;
008500080206         endif;
008600080206
008700080206       ENDSR;
008800080702
008900080206       //--------------------------------------------------------------
009000080206       //?Operazioni finali.
009100080206       //--------------------------------------------------------------
009200080206       BEGSR RoutEnd;
009300080627
009400080206         *inLR = *on;
009500080704
009600080206         return;
009700080206
009800080206       ENDSR;
009900080206
010000080206      /end-free
