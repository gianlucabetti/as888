000100060801      *===============================================================*
000200061127     H decedit('0,') datedit(*dmy/)
000300061127     F*------------------------------------------------------------------------*
000400061127     F* DATA BASE
000500061127     F*------------------------------------------------------------------------*
000600090608     Fazcpc01l  IF   E           K DISK
000700090608     D*------------------------------------------------------------------------*
000800090608     D* DS
000900090608     D*------------------------------------------------------------------------*
001000090608     D tisi81ds      e ds
001100061127     C*------------------------------------------------------------------------*
001200061127     C* MAIN LINE
001300061127     C*------------------------------------------------------------------------*
001400061127     C*
001500061127     C     *Entry        plist
001600090608     C                   parm                    IN_VER            5
001700061204     C*
001800061204     C* Imposto la versione cappario da trattare
001900090608     C                   move(p)   IN_VER        wVERS             5 0
002000061204     C*
002100061204     C* Definizione chiavi di lettura
002200061204     C*
002300090608     C* AZCPC01L - Parziale
002400090608     C     KEYcpc01_P    KLIST
002500090608     C                   KFLD                    cpcVER
002600090608     C                   KFLD                    cpcNAR
002700061204     C*
002800061204     C* Elabora
002900061127     C                   exsr      Procedi
003000061127     C*
003100061127     C* Fine
003200061127     C                   eval      *INLR = *on
003300061127     C*--------------------------------------------------------------------------------------------*
003400061127     C* Procedi - Routine iter di elaborazinoe
003500061127     C*--------------------------------------------------------------------------------------------*
003600061127     C     Procedi       BEGSR
003700061127     C*
003800090608     C                   exsr      exeCap
003900061127     C*
004000061127     C                   ENDSR
004100061127     C*--------------------------------------------------------------------------------------------*
004200090608     C* exeCap
004300061127     C*--------------------------------------------------------------------------------------------*
004400090608     C     exeCap        BEGSR
004500061127     C*
004600090608     C* Scorro tutto il file AZCPC01L (solo versione interessata)
004700090608     C                   eval      cpcVER = wVERS
004800090608     C                   eval      cpcNAR = *blanks
004900090608     C     KEYcpc01_P    setll     azcpc01l
005000090608     C     KEYcpc01_P    reade     azcpc01l
005100090608     C                   dow       not %eof(azcpc01l)
005200090608     C*
005300090608     C* AGGIORNA IL FLAG "ESISTENZA LOCALITA'" SUL CAP
005400090608     C                   Z-ADD     wVERS         D81VER
005500090608     C                   MOVEL     cpcNAR        D81NAR
005600090608     C                   MOVEL     cpcCAP        D81CAP
005700090608     C                   MOVEL     'L'           D81CHK
005800090608     C                   CALL      'TISI81R'
005900090608     C                   PARM                    tisi81ds
006000061127     C*
006100090608     C* Proseguo con la lettura del file AZCPC (solo versione interessata)
006200090608     C     KEYcpc01_P    reade     azcpc01l
006300061127     C                   enddo
006400061127     C*
006500061127     C                   ENDSR
