000100130213      //---------------------------------------------------------------
000200130717      //?TRULQLKR - Crea File Spia per creazione dati su QLIK
000300130213      //---------------------------------------------------------------
000400130213     h decedit('0,') datedit(*ymd/) option(*nodebugio)
000500130213
000600130213      //---------------------------------------------------------------
000700130213      //?Dichiarazione file.
000800130213      //---------------------------------------------------------------
000900130717     fAZQLK01L  uf a e           k disk
001000130213
001100130213      //---------------------------------------------------------------
001200130213      //?Definizione strutture dati.
001300130213      //---------------------------------------------------------------
001400130213
001500130213      //?Parametri ricevuti
001600130213     d KPJBA         e ds
001700130213
001800130213      //---------------------------------------------------------------
001900130213      //?Definizione variabili globali.
002000130213      //---------------------------------------------------------------
002100130213
002200130717      //?Campi di comodo
002300130717     d wTPela          s             10a
002400130213
002500130213
002600130213      //---------------------------------------------------------------
002700130213      //?M A I N - L I N E
002800130213      //---------------------------------------------------------------
002900130213
003000130213     c     *Entry        plist
003100130213     c                   parm                    KPJBA
003200130213
003300130213      /free
003400130213
003500130717       wTPela = %subst(kpjbu:1:10);
003600130717
003700130717       IF  wTPela <> *blanks;
003800130717
003900130717       //?Aggancio il file con il tipo elaborazione passato
004000130717         chain wTPela AZQLK01L;
004100130717           QLKtck = %char(%timestamp:*iso0);
004200130717         IF  %found(AZQLK01L);
004300130717           UPDATE  AZQLK000;
004400130717         ELSE;
004500130717           QLKela = wTPela;
004600130717           WRITE  AZQLK000;
004700130717         ENDIF;
004800130717
004900130717       ENDIF;
005000130213
005100130213         *inLR = *on;
005200130213
005300130213      /end-free
